\newcommand{\feat}[2]{
\subsection{\it #1}

{\setlength\parskip{5 pt}
#2
}
}
\newcommand{\subfeat}[2]{
\subsubsection{\bf #1}

{\setlength\parskip{5 pt}
#2
}
}

\newcommand{\jump}{\par \vspace{0.8ex}}
\makeatletter
%%keyBegin

\define@key{archetype}{expertI}{\def\expertI{#1}}
\define@key{archetype}{maxspellI}{\def\maxspellI{#1}}
\define@key{archetype}{bonusI}{\def\bonusI{#1}}
\define@key{archetype}{expertII}{\def\expertII{#1}}
\define@key{archetype}{maxspellII}{\def\maxspellII{#1}}
\define@key{archetype}{bonusII}{\def\bonusII{#1}}
\define@key{archetype}{expertIII}{\def\expertIII{#1}}
\define@key{archetype}{maxspellIII}{\def\maxspellIII{#1}}
\define@key{archetype}{bonusIII}{\def\bonusIII{#1}}
\define@key{archetype}{expertIV}{\def\expertIV{#1}}
\define@key{archetype}{maxspellIV}{\def\maxspellIV{#1}}
\define@key{archetype}{bonusIV}{\def\bonusIV{#1}}
\define@key{archetype}{expertV}{\def\expertV{#1}}
\define@key{archetype}{maxspellV}{\def\maxspellV{#1}}
\define@key{archetype}{bonusV}{\def\bonusV{#1}}
\define@key{archetype}{expertVI}{\def\expertVI{#1}}
\define@key{archetype}{maxspellVI}{\def\maxspellVI{#1}}
\define@key{archetype}{bonusVI}{\def\bonusVI{#1}}
\define@key{archetype}{expertVII}{\def\expertVII{#1}}
\define@key{archetype}{maxspellVII}{\def\maxspellVII{#1}}
\define@key{archetype}{bonusVII}{\def\bonusVII{#1}}
\define@key{archetype}{expertVIII}{\def\expertVIII{#1}}
\define@key{archetype}{maxspellVIII}{\def\maxspellVIII{#1}}
\define@key{archetype}{bonusVIII}{\def\bonusVIII{#1}}
\define@key{archetype}{expertIX}{\def\expertIX{#1}}
\define@key{archetype}{maxspellIX}{\def\maxspellIX{#1}}
\define@key{archetype}{bonusIX}{\def\bonusIX{#1}}
\define@key{archetype}{expertX}{\def\expertX{#1}}
\define@key{archetype}{maxspellX}{\def\maxspellX{#1}}
\define@key{archetype}{bonusX}{\def\bonusX{#1}}
\define@key{archetype}{expertXI}{\def\expertXI{#1}}
\define@key{archetype}{maxspellXI}{\def\maxspellXI{#1}}
\define@key{archetype}{bonusXI}{\def\bonusXI{#1}}
\define@key{archetype}{expertXII}{\def\expertXII{#1}}
\define@key{archetype}{maxspellXII}{\def\maxspellXII{#1}}
\define@key{archetype}{bonusXII}{\def\bonusXII{#1}}
\define@key{archetype}{expertXIII}{\def\expertXIII{#1}}
\define@key{archetype}{maxspellXIII}{\def\maxspellXIII{#1}}
\define@key{archetype}{bonusXIII}{\def\bonusXIII{#1}}
\define@key{archetype}{expertXIV}{\def\expertXIV{#1}}
\define@key{archetype}{maxspellXIV}{\def\maxspellXIV{#1}}
\define@key{archetype}{bonusXIV}{\def\bonusXIV{#1}}
\define@key{archetype}{expertXV}{\def\expertXV{#1}}
\define@key{archetype}{maxspellXV}{\def\maxspellXV{#1}}
\define@key{archetype}{bonusXV}{\def\bonusXV{#1}}
\define@key{archetype}{expertXVI}{\def\expertXVI{#1}}
\define@key{archetype}{maxspellXVI}{\def\maxspellXVI{#1}}
\define@key{archetype}{bonusXVI}{\def\bonusXVI{#1}}
\define@key{archetype}{expertXVII}{\def\expertXVII{#1}}
\define@key{archetype}{maxspellXVII}{\def\maxspellXVII{#1}}
\define@key{archetype}{bonusXVII}{\def\bonusXVII{#1}}
\define@key{archetype}{expertXVIII}{\def\expertXVIII{#1}}
\define@key{archetype}{maxspellXVIII}{\def\maxspellXVIII{#1}}
\define@key{archetype}{bonusXVIII}{\def\bonusXVIII{#1}}
\define@key{archetype}{expertXIX}{\def\expertXIX{#1}}
\define@key{archetype}{maxspellXIX}{\def\maxspellXIX{#1}}
\define@key{archetype}{bonusXIX}{\def\bonusXIX{#1}}
\define@key{archetype}{expertXX}{\def\expertXX{#1}}
\define@key{archetype}{maxspellXX}{\def\maxspellXX{#1}}
\define@key{archetype}{bonusXX}{\def\bonusXX{#1}}
\define@key{archetype}{hp}{\def\hp{#1}}
\define@key{archetype}{fp}{\def\fp{#1}}
\define@key{archetype}{armour}{\def\armour{#1}}
\define@key{archetype}{tool}{\def\tool{#1}}
\define@key{archetype}{disc}{\def\disc{#1}}
\define@key{archetype}{weapon}{\def\weapon{#1}}
\define@key{archetype}{prof}{\def\prof{#1}}
\define@key{archetype}{equip}{\def\equip{#1}}
\define@key{archetype}{memorised}{\def\memorised{#1}}
\define@key{archetype}{shortmode}{\def\mode{#1}}
\define@key{archetype}{name}{\def\name{#1}}
\define@key{archetype}{anMode}{\def\anMode{#1}}
%%keyEnd    
\makeatother

\def\L{4}
\newcommand\tableRow[4]
{
	#1	&	+#2	&	#3	&	\parbox[t]{\L cm}{#4} \\
}

\newcommand{\tableShort}[1]
{
	\tableRow{1}{\expertI}{\maxspellI}{\bonusI}
	\tableRow{2}{\expertII}{\maxspellII}{\bonusII}
	\tableRow{3}{\expertIII}{\maxspellIII}{\bonusIII}
}   
  
      
      
\newcommand{\tableLong}
{      
	\tableRow{1}{\expertI}{\maxspellI}{\bonusI}
	\tableRow{2}{\expertII}{\maxspellII}{\bonusII}
	\tableRow{3}{\expertIII}{\maxspellIII}{\bonusIII}
	\tableRow{4}{\expertIV}{\maxspellIV}{\bonusIV}
	\tableRow{5}{\expertV}{\maxspellV}{\bonusV}
	\tableRow{6}{\expertVI}{\maxspellVI}{\bonusVI}
	\tableRow{7}{\expertVII}{\maxspellVII}{\bonusVII}
	\tableRow{8}{\expertVIII}{\maxspellVIII}{\bonusVIII}
	\tableRow{9}{\expertIX}{\maxspellIX}{\bonusIX}
	\tableRow{10}{\expertX}{\maxspellX}{\bonusX}
	\tableRow{11}{\expertXI}{\maxspellXI}{\bonusXI}
	\tableRow{12}{\expertXII}{\maxspellXII}{\bonusXII}
	\tableRow{13}{\expertXIII}{\maxspellXIII}{\bonusXIII}
	\tableRow{14}{\expertXIV}{\maxspellXIV}{\bonusXIV}
	\tableRow{15}{\expertXV}{\maxspellXV}{\bonusXV}
	\tableRow{16}{\expertXVI}{\maxspellXVI}{\bonusXVI}
	\tableRow{17}{\expertXVII}{\maxspellXVII}{\bonusXVII}
	\tableRow{18}{\expertXVIII}{\maxspellXVIII}{\bonusXVIII}
	\tableRow{19}{\expertXIX}{\maxspellXIX}{\bonusXIX}
	\tableRow{20}{\expertXX}{\maxspellXX}{\bonusXX}
}
          
          
\newcommand\redsub[1]
{
\subsection{\textcolor{rulered}{ #1}}
}
		
\newcommand{\archetype}[1]
{
    
    
     \begingroup
     
     %%defaultBegin

	\setkeys{archetype}{ expertI=0, maxspellI=undefined, bonusI= ---, expertII=0, maxspellII=undefined, bonusII= ---, expertIII=0, maxspellIII=undefined, bonusIII= ---, expertIV=0, maxspellIV=undefined, bonusIV= ---, expertV=0, maxspellV=undefined, bonusV= ---, expertVI=0, maxspellVI=undefined, bonusVI= ---, expertVII=0, maxspellVII=undefined, bonusVII= ---, expertVIII=0, maxspellVIII=undefined, bonusVIII= ---, expertIX=0, maxspellIX=undefined, bonusIX= ---, expertX=0, maxspellX=undefined, bonusX= ---, expertXI=0, maxspellXI=undefined, bonusXI= ---, expertXII=0, maxspellXII=undefined, bonusXII= ---, expertXIII=0, maxspellXIII=undefined, bonusXIII= ---, expertXIV=0, maxspellXIV=undefined, bonusXIV= ---, expertXV=0, maxspellXV=undefined, bonusXV= ---, expertXVI=0, maxspellXVI=undefined, bonusXVI= ---, expertXVII=0, maxspellXVII=undefined, bonusXVII= ---, expertXVIII=0, maxspellXVIII=undefined, bonusXVIII= ---, expertXIX=0, maxspellXIX=undefined, bonusXIX= ---, expertXX=0, maxspellXX=undefined, bonusXX= ---, hp=None, fp=None, armour=None, tool=None, disc=None, weapon=None, prof=None, equip=None, memorised=None,name=None,shortmode=0,anMode=0}


	%%defaultEnd
	\def\w{4.1}
	\setkeys{archetype}{#1}
 
     
	\begin{tcolorbox}[  before skip=7pt plus 2pt,
			     	  boxrule=0pt,
			     	  boxsep=0pt,
			     	  toptitle=4pt,
			     	  left=0pt,
			     	  right=0pt,
			     	  bottom=5pt,
			     	  arc=0.5mm,
			     	  oversize=0pt,
			     	  colback=papyrus,
			     	 colbacktitle=titlered,
			     	colframe=titlered, title=\vspace{-4ex}
     				]
     		
	     		{\large \begin{center} \bf \name \end{center}}
	     		\vspace{-1.3ex}
	     		
	     		\dndlineLong
	     	
	     		\begin{center}
	     			\small
	     			\archetypealternate
	     		        \begin{tabular}{c c c c  c }

				\bf Level 	&	\bf Expertise	& \bf Spells & \bf Features
				\\ 
		     		\if\mode0
		     			\tableLong
				\fi
				\if\mode1
					\tableShort
				\fi
			   	\end{tabular}
	     		\end{center}
	     		\normalsize
	     		\dndlineLong
				
				
     	\end{tcolorbox}
     	
     	
     	\section*{Class Statistics}
		
		As a\if\anMode1{n}\fi~\name{}, you gain the following fundamental features:
		
		\subsection{Health \& Fortitude}
		\def\w{6}
		\begin{tabular}{ r p{\w cm}}
			\bf Initial HP:	&	\hp{} + \attPhys{} Modifier
			\\
			\bf Gained HP:	&	1d\hp{} per \name{} level
			\\
			~
			\\
			\bf Initial FP:	&	\fp{} + \attInt{} Modifier
			\\
			\bf Gained FP:	&	1d\fp{} per \name{} level
		\end{tabular}

		
		\subsection{Proficiencies}
		\def\w{6}
		\begin{tabular}{ r p{\w cm}}
			\bf Spell Disciplines:	&	\disc
			\\
			~
			\\
			\bf Skills:	&	\prof
			\\
			~
			\\
			\bf Weapons:	&	\weapon
			\\
			~
			\\
			\bf Tools:	&	\tool
		\end{tabular}
		
		\subsection{Starting Loadout}
		\def\w{6}
		\begin{tabular}{ r p{\w cm}}
		\renewcommand{\arraystretch}{1.5}
			\bf Equipment:	&	\equip
			\\
			~
			\\
			\bf Memorised Spells:	&	\memorised
			
		\end{tabular}
		
		\endgroup
}
