\chapter{Roll Statistics}

In this chapter I provide a statistical breakdown of the liklihood of certain rolls. This is only for the \"uber keen GM who wants to take a peek behind the metaphorical curtain. 

\section{Analytic Probability}

The success of an action is determined by rolling a dice pool of $N$ dice (accumulated from Attributes, Abilities, Affinities and various bonuses). Each of these dice is then compared to a target number, the DV. Every dice which exceeds the DV counts as a success, whilst every dice within the `catastrophe range' subtracts from the number of successes. 

The total number of successes is therefore determined by the number of dice which exceed the DV and those which fall into the catastrophe range. The rules ensure that the DV and the catastrophe range can never overlap, so we may always assume these to be mutually independent possibilities. 

Since the events of `rolling a success' and `rolling a catastrophe' are mutually exclusive, success-or-failure events, we may model them with a Binomial distribution. Hence, the probability of rolling $n$ successes from $N$ dice, with a probability $p$ of success is:

$$ P(n | N, p) = B(n_s,N,p) = {^N}C_{n} p^{n} (1 - p)^{N - n} $$

Where ${^n}C_r$ is the usual $n$-choose-$r$ function:

$$ {^n}C_r = \frac{n!}{r!(n-r)!} $$

In order to score $n_s$ total successes, we must therefore succeed in rolling $n_s+f$ dice which exceed the DV, {\bf and} $f$ dice which meet the catastrophe condition. 

The probability of rolling a success is determined by the DV and the maximum possible value of the dice, $D$, assuming a normal numbering between 1 and $D$. Hence:

$$ p\left( \text{roll} \geq \text{DV}| D\text{-sided dice}\right ) = \frac{D + 1 - \text{DV}}{D} $$ 

Hence, the probability of rolling $n_s + f$ dice from our original pool is:

$$ P\left(n_s + f | N,  \frac{D + 1 - \text{DV}}{D}  \right)  = B(n_s + f , N, p_s ) $$ 

The probability of rolling $f$ catastrophes depends on $p_c$, the catastrophe probability and $N_c$, the remaining dice left to roll that many catastrophes. $N_c$ must simply be the number of dice not already determined to be successes:
$$N_c = N - n_s - f$$
The catastrophe probability is slightly more subtle, a first glance would indicate that it would take the form:
$$ p_c \neq \frac{D + 1 - \text{X}}{D} $$
Where $X$ is the maximum end of the catastrophe range (usually equal to 1). However, we must take into account that we already know that the dice in the `catastrophe pool' cannot exceed the DV, else they would already have been counted. Hence:
$$ p_c = \frac{X}{\text{DV} - 1} $$
Therefore, the probability of rolling $f$ catastrophes, given an initial pool of $N$ dice, of which $n_s + f$ have already been used is:
$$p\left(f \text{ catastrophes} | N, n_s + f, \frac{X}{\text{DV + 1}} \right) = B(f, N- n_s -f, p_c) $$ 

Therefore, the combined probability of doing both things simultaneously is:

\begin{align*}
 p(n_s, f | N, D, \text{DV}, X)  =& B(n_s + f, N,p_s) \times B(f,N - n_s - f, p_c)
 \\
 & = {^N}C_{n_s + f} \left(\frac{D + 1 - \text{DV}}{D} \right)^{n_s + f} \left( \frac{ \text{DV} - 1}{D} \right)^{N - n_s - f}
 \\ 
	& \times {^{N - n_s - f}}C_f \left( \frac{X}{\text{DV} - 1} \right)^f \left(\frac{\text{DV} - 1 - X}{\text{DV}} \right)^{N - n_s - 2f}
	\\
	& \times \Theta(N - n_s - 2 f)
 \end{align*}
This final function, $\Theta(x)$ is the Heaviside step function, it evaluates to zero whenever the argument is less than 0, and ensures that you are never relying on more dice than you actually have. If using a statistics package which evaluates the Binomial function directly, it should include this constraint automatically. 

The total probability of getting $n_s$ successes is therefore the sum over all possible combinations of $n_s + f$, giving:

$$ p(n_s | N,D, \text{DV},X) = \sum_{f = 0}^{N - n_s}B(n_s + f, N,p_s) \times B(f,N - n_s - f, p_c)$$

The probability of a benign failure is therefore:
$$ p(\text{fail}) = p(0 | N,D, \text{DV}, X)$$
Whilst the probability of a Catastrophe is found by summing over all negative values of $n_s$:
$$ p(\text{catastrophe}) = \sum_{n_s = - N}^{-1} p(n_s | N, D, \text{DV}, X)$$

\section{Outcome Tables}

In this section a number of tables representing various probabilities.


\newcounter{rowcount}
\newcommand\rowcount{\stepcounter{rowcount}\therowcount}
\def\cc{\cellcolor{\tablecolorhead}\bf}

\newcommand\vcol
{
	\def\compare{13}
	\ifnum\therowcount=\compare\relax
		\multirow{-14}{*}{\rotatebox[origin=c]{90}{\cc \bf Number of Dice}}
	\fi
}
\newcommand\probRow[9]
{
		\cc \vcol & \cc \rowcount & #1	&	#2	&	#3	&	#4	&	#5	&	#6	&	#7	&	#8	&	#9 \\
}

\newcommand\probTable[1]
{
	\vbox{
		\setcounter{rowcount}{0}
		\scriptsize
		\begin{center}
			\begin{rndtable}{@{} m{0.3cm}m{0.2cm}ccccccccc}
			~&~&\multicolumn{9}{c}{\cc \bf Number of Successes} \\
			\cc \bf~&\cc \bf~&\cc \bf \tiny Catastrophe&{\cc \bf \tiny Failure}&{\cc \bf 1}&{\cc \bf 2}&{\cc \bf 3}&{\cc \bf 4}&{\cc \bf 5}&{\cc \bf 6}&{\cc \bf $\geq$7}\\
				#1
				
			\end{rndtable}
		\end{center}
		}
}

\subsection{Difficulty = 3}
\probTable{
\probRow{8.4}{8.4}{83}{-}{-}{-}{-}{-}{-}
\probRow{2.1}{15}{14}{69}{-}{-}{-}{-}{-}
\probRow{2}{3.6}{19}{17}{58}{-}{-}{-}{-}
\probRow{0.79}{3.5}{5.9}{22}{19}{48}{-}{-}{-}
\probRow{0.52}{1.3}{5.3}{8.6}{24}{20}{40}{-}{-}
\probRow{0.27}{1.1}{2.3}{7.2}{11}{25}{20}{33}{-}
\probRow{0.11}{0.51}{1.5}{3.3}{8.8}{13}{26}{20}{28}
\probRow{0.085}{0.34}{0.77}{2.4}{4.5}{11}{14}{25}{42}
\probRow{0.047}{0.17}{0.53}{1.2}{3.1}{5.9}{12}{16}{61}
\probRow{0.032}{0.13}{0.27}{0.83}{1.8}{4.2}{7.3}{13}{72}
\probRow{0.013}{0.072}{0.18}{0.42}{1.1}{2.4}{5.3}{8.4}{82}
\probRow{0.015}{0.042}{0.11}{0.29}{0.66}{1.6}{3.2}{6.3}{88}
\probRow{$<$0.1}{0.02}{0.067}{0.18}{0.41}{1}{2.1}{3.9}{92}
\probRow{$<$0.1}{0.011}{0.028}{0.1}{0.24}{0.6}{1.3}{2.8}{95}
} 

\subsection{Difficulty = 4}
\probTable{
\probRow{17}{8.4}{75}{-}{-}{-}{-}{-}{-}
\probRow{5.5}{26}{12}{56}{-}{-}{-}{-}{-}
\probRow{7.2}{6.9}{30}{14}{42}{-}{-}{-}{-}
\probRow{3.5}{11}{9.4}{30}{14}{32}{-}{-}{-}
\probRow{3.3}{4.8}{14}{12}{29}{13}{24}{-}{-}
\probRow{2}{5.4}{6.3}{16}{14}{27}{12}{18}{-}
\probRow{1.7}{3}{6.8}{8.4}{18}{15}{24}{10}{13}
\probRow{1}{2.8}{3.8}{8.8}{10}{18}{15}{21}{19}
\probRow{0.82}{1.9}{3.5}{5.4}{11}{12}{19}{14}{33}
\probRow{0.59}{1.6}{2.2}{5}{6.8}{12}{13}{18}{41}
\probRow{0.41}{1.1}{2}{3.3}{6.1}{8.1}{13}{13}{52}
\probRow{0.3}{0.94}{1.3}{2.8}{4.4}{7.7}{9.3}{14}{59}
\probRow{0.25}{0.72}{1.1}{1.9}{3.8}{5.4}{8.9}{10}{68}
\probRow{0.18}{0.6}{0.82}{1.6}{2.7}{4.7}{6.5}{9.9}{73}
} 

\subsection{Difficulty = 5}
\probTable{
\probRow{17}{17}{67}{-}{-}{-}{-}{-}{-}
\probRow{8.3}{25}{22}{45}{-}{-}{-}{-}{-}
\probRow{8.2}{12}{28}{22}{30}{-}{-}{-}{-}
\probRow{5.5}{12}{16}{27}{20}{20}{-}{-}{-}
\probRow{4.3}{8.1}{15}{18}{25}{16}{13}{-}{-}
\probRow{3.3}{6.8}{10}{17}{19}{22}{13}{8.8}{-}
\probRow{2.6}{5.3}{8.6}{13}{18}{18}{18}{10}{5.8}
\probRow{1.9}{4.4}{6.6}{11}{15}{18}{17}{14}{12}
\probRow{1.5}{3.5}{5.3}{8.7}{13}{16}{17}{15}{20}
\probRow{1.2}{2.8}{4.2}{7.1}{10}{14}{16}{16}{29}
\probRow{0.86}{2.2}{3.4}{5.7}{8.8}{12}{15}{15}{37}
\probRow{0.69}{1.9}{2.7}{4.7}{7.2}{10}{13}{15}{45}
\probRow{0.48}{1.6}{2.1}{3.7}{6}{8.6}{12}{14}{52}
\probRow{0.38}{1.3}{1.7}{3.1}{4.9}{7.4}{10}{12}{59}
} 

\subsection{Difficulty = 6}
\probTable{
\probRow{25}{17}{58}{-}{-}{-}{-}{-}{-}
\probRow{15}{32}{19}{34}{-}{-}{-}{-}{-}
\probRow{16}{17}{30}{17}{20}{-}{-}{-}{-}
\probRow{12}{19}{18}{26}{13}{12}{-}{-}{-}
\probRow{11}{14}{20}{18}{20}{9.6}{6.7}{-}{-}
\probRow{9.4}{14}{15}{20}{16}{15}{6.7}{4}{-}
\probRow{8.2}{12}{14}{16}{18}{14}{11}{4.6}{2.3}
\probRow{6.9}{12}{12}{15}{16}{15}{11}{7.7}{4.6}
\probRow{5.9}{10}{11}{13}{16}{14}{13}{8.5}{8}
\probRow{5.1}{9.8}{9.5}{12}{14}{15}{13}{10}{12}
\probRow{4.4}{8.9}{8.5}{11}{13}{14}{13}{11}{16}
\probRow{3.8}{8.4}{7.6}{10}{12}{13}{13}{11}{20}
\probRow{3.3}{7.7}{7}{9.4}{11}{12}{13}{12}{25}
\probRow{2.8}{7}{6.2}{8.4}{10}{12}{13}{12}{29}
} 

\subsection{Difficulty = 7}
\probTable{
\probRow{25}{25}{50}{-}{-}{-}{-}{-}{-}
\probRow{19}{31}{25}{25}{-}{-}{-}{-}{-}
\probRow{19}{22}{28}{19}{13}{-}{-}{-}{-}
\probRow{16}{21}{22}{22}{12}{6.2}{-}{-}{-}
\probRow{15}{19}{21}{19}{16}{7.8}{3.2}{-}{-}
\probRow{13}{18}{18}{19}{16}{11}{4.6}{1.5}{-}
\probRow{11}{17}{16}{18}{16}{12}{6.8}{2.8}{0.8}
\probRow{10}{16}{15}{17}{16}{13}{8.1}{4.4}{2}
\probRow{9}{15}{13}{15}{15}{13}{9.4}{5.5}{3.8}
\probRow{8}{14}{12}{14}{15}{13}{10}{6.8}{5.9}
\probRow{7.2}{14}{11}{13}{14}{13}{11}{7.7}{8.4}
\probRow{6.4}{13}{10}{12}{14}{13}{11}{8.5}{11}
\probRow{5.4}{12}{9.6}{12}{13}{13}{12}{9.3}{14}
\probRow{5}{12}{9}{11}{12}{13}{12}{9.8}{17}
} 

\subsection{Difficulty = 8}
\probTable{
\probRow{33}{25}{42}{-}{-}{-}{-}{-}{-}
\probRow{28}{34}{21}{17}{-}{-}{-}{-}{-}
\probRow{29}{25}{25}{13}{7.4}{-}{-}{-}{-}
\probRow{27}{27}{20}{16}{7.2}{3}{-}{-}{-}
\probRow{26}{25}{20}{15}{9.5}{3.7}{1.3}{-}{-}
\probRow{24}{26}{18}{15}{9.8}{5.4}{1.9}{0.52}{-}
\probRow{23}{26}{17}{14}{10}{6.1}{2.9}{0.9}{0.22}
\probRow{21}{26}{16}{14}{11}{6.8}{3.6}{1.5}{0.56}
\probRow{19}{27}{15}{14}{11}{7.3}{4.1}{2}{0.97}
\probRow{18}{27}{14}{13}{11}{7.9}{4.8}{2.6}{1.6}
\probRow{17}{27}{14}{13}{11}{8.2}{5.4}{3.1}{2.2}
\probRow{15}{28}{13}{13}{11}{8.2}{5.6}{3.4}{3}
\probRow{14}{28}{13}{12}{11}{8.5}{5.9}{3.9}{3.9}
\probRow{13}{29}{12}{12}{11}{8.4}{6.3}{4.1}{4.7}
} 

\subsection{Difficulty = 9}
\probTable{
\probRow{34}{33}{33}{-}{-}{-}{-}{-}{-}
\probRow{33}{33}{22}{11}{-}{-}{-}{-}{-}
\probRow{34}{29}{22}{11}{3.7}{-}{-}{-}{-}
\probRow{33}{29}{19}{12}{5}{1.2}{-}{-}{-}
\probRow{32}{28}{18}{12}{6.2}{2}{0.4}{-}{-}
\probRow{30}{29}{17}{12}{7}{2.9}{0.82}{0.15}{-}
\probRow{29}{30}{16}{12}{7.3}{3.5}{1.3}{0.32}{0.04}
\probRow{27}{32}{16}{12}{7.7}{4}{1.7}{0.55}{0.14}
\probRow{25}{32}{15}{12}{8}{4.4}{2.1}{0.79}{0.29}
\probRow{24}{34}{14}{11}{8}{4.9}{2.5}{1}{0.47}
\probRow{22}{35}{14}{11}{8.1}{5}{2.9}{1.2}{0.72}
\probRow{21}{36}{13}{11}{8.1}{5.2}{3.1}{1.5}{0.98}
\probRow{19}{37}{12}{11}{8.1}{5.4}{3.3}{1.8}{1.2}
\probRow{18}{39}{12}{11}{8.2}{5.6}{3.4}{2}{1.6}
} 

\subsection{Difficulty = 10}
\probTable{
\probRow{42}{33}{25}{-}{-}{-}{-}{-}{-}
\probRow{45}{32}{17}{6.2}{-}{-}{-}{-}{-}
\probRow{47}{29}{16}{6.3}{1.5}{-}{-}{-}{-}
\probRow{47}{30}{14}{6.8}{2}{0.35}{-}{-}{-}
\probRow{45}{32}{13}{6.6}{2.5}{0.63}{0.092}{-}{-}
\probRow{44}{34}{12}{6.6}{2.8}{0.88}{0.19}{0.026}{-}
\probRow{42}{37}{11}{6.2}{3}{1.1}{0.3}{0.051}{$<$0.1}
\probRow{39}{40}{10}{6.1}{3}{1.2}{0.39}{0.1}{0.019}
\probRow{37}{43}{9.3}{5.8}{3}{1.3}{0.48}{0.15}{0.032}
\probRow{35}{46}{8.9}{5.7}{3.1}{1.3}{0.56}{0.16}{0.064}
\probRow{32}{49}{8.5}{5.3}{3}{1.5}{0.63}{0.2}{0.088}
\probRow{30}{51}{7.9}{5.2}{2.9}{1.5}{0.6}{0.26}{0.12}
\probRow{28}{54}{7.3}{4.9}{2.9}{1.5}{0.7}{0.28}{0.14}
\probRow{26}{56}{7.2}{4.6}{2.8}{1.5}{0.67}{0.31}{0.15}
} 

\subsection{Difficulty = 11}
\probTable{
\probRow{42}{42}{17}{-}{-}{-}{-}{-}{-}
\probRow{52}{31}{14}{2.7}{-}{-}{-}{-}{-}
\probRow{55}{29}{12}{3.5}{0.43}{-}{-}{-}{-}
\probRow{55}{30}{11}{3.7}{0.77}{0.086}{-}{-}{-}
\probRow{53}{33}{9.5}{3.6}{0.96}{0.16}{0.014}{-}{-}
\probRow{51}{36}{8.4}{3.5}{1.1}{0.22}{0.022}{$<$0.1}{-}
\probRow{48}{40}{7.3}{3.2}{1.1}{0.28}{0.05}{$<$0.1}{$<$0.1}
\probRow{45}{44}{6.7}{3}{1.1}{0.33}{0.071}{0.011}{$<$0.1}
\probRow{42}{47}{6}{2.9}{1.1}{0.38}{0.096}{0.017}{$<$0.1}
\probRow{39}{51}{5.6}{2.6}{1.1}{0.33}{0.11}{0.027}{$<$0.1}
\probRow{36}{55}{4.9}{2.4}{1.1}{0.4}{0.13}{0.028}{$<$0.1}
\probRow{34}{58}{4.5}{2.3}{1}{0.36}{0.14}{0.024}{0.013}
\probRow{31}{61}{4}{2.1}{0.96}{0.39}{0.11}{0.038}{$<$0.1}
\probRow{29}{64}{3.7}{2}{0.95}{0.33}{0.11}{0.043}{0.016}
} 

\subsection{Difficulty = 12}
\probTable{
\probRow{50}{42}{8.5}{-}{-}{-}{-}{-}{-}
\probRow{67}{26}{7}{0.72}{-}{-}{-}{-}{-}
\probRow{70}{24}{5.3}{0.86}{0.06}{-}{-}{-}{-}
\probRow{68}{27}{4.2}{0.83}{0.11}{$<$0.1}{-}{-}{-}
\probRow{63}{33}{3.1}{0.72}{0.1}{$<$0.1}{$<$0.1}{-}{-}
\probRow{59}{38}{2.5}{0.65}{0.11}{0.013}{$<$0.1}{$<$0.1}{-}
\probRow{54}{43}{2}{0.53}{0.1}{0.016}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{50}{48}{1.5}{0.42}{0.093}{$<$0.1}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{46}{53}{1.1}{0.36}{0.075}{$<$0.1}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{42}{57}{0.96}{0.31}{0.079}{0.022}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{38}{61}{0.73}{0.22}{0.063}{0.012}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{35}{64}{0.63}{0.19}{0.048}{0.011}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{32}{67}{0.5}{0.17}{0.054}{0.017}{$<$0.1}{$<$0.1}{$<$0.1}
\probRow{30}{70}{0.41}{0.14}{0.037}{0.014}{$<$0.1}{$<$0.1}{$<$0.1}
} 
